---
title: "Java Virtaul Machine"
description: "Java Virtaul Machine에 대해서"
date: 2022-01-29
update: 2022-01-29
tags:
  - java
---

# Java Virtaul Machine

## JVM

JVM Java Virtual Machine 자바 가상 머신을 약자로 줄여놓은 용어이다. 가상머신이란 프로그램을 실행시키기 위해 물리적 머신과 유사한 머신을 소프트웨어로 구현한 것이라고 할 수 있다. JVM은 자바 어플리케이션을 클래스 로더를 통해 읽어 자바 API와 함께 실행시키는 역할을 한다.

JVM의 특징

- **스택 기반의 가상 머신**: 대표적인 컴퓨터 아키텍처인 인텔이나 ARM 아키텍처 같은 하드웨어는 레지스터 기반으로 동작하지만 JVM은 스택 기반으로 동작한다.
- **심볼릭 레퍼런스**: 기본 자료형을 제외한 모든 타입을 명시적인 메모리 주소 기반의 레퍼런스가 아니라 심복릭 레퍼런스를 통해 참조한다.
- **가비지 컬렉션(Garbage Collection)**: 클래스 인스턴스는 사용자 코드에 의해 명시적으로 생성되고 가비지 컬렉션에 의해 자동으로 파괴된다.
- **기본 자료형을 명확하게 정의하여 플랫폼 독립성 보장**: C/C++ 등의 언어는 플랫폼에 따라 int형의 크기가 변한다. JVM은 기본 자료형을 명확하게 정의하여 호환성을 유지하고 플랫폼 독립성을 보장한다.
- **네트워크 바이트 오더**: 자바 클래스 파일은 네트워크 바이트 오더를 사용한다. 인텔 x86 아키텍처가 사용하는 리틀 엔디안이나, RISC 계열 아키텍처가 주로 사용하는 빅 엔디안 사이에서 플랫폼 독립성을 유지하려면 고정된 바이트 오더를 유지해야 하므로 네트워크 전송 시에 사용하는 바이트 오더인 네트워크 바이트 오더를 사용한다. 네트워크 바이트 오더는 빅 엔디안이다.

### 1.스택 기반과 레지스터 기반의 차이

가장 큰 차이는 피연산자를 저장하고 다시 가져오는 메카니즘이 다르다.

### 1.1 Stack 기반 가상 머신

![](stack.png)

- Java VM, Net Clr
- 대다수의 가상머신이 스택기반
- 피연산자와 연산 후 결과를 스택에 저장한다.
- 위의 경우 스택 구조이기 때문에 Push, Pop이 필요하며 4단계의 명령이 필요하다.
- 장점: 다음 피연산자의 메모리 위치를 기억할 필요가 없다. 스택에서 pop만 하면 피연산자가 나오기 때문에 메모리를 기억할 필요가 없다.

### 1.2 Register 기반 가상 머신

![](register.png)

- Lua VM, Dalvik VM
- 피연산자가 CPU의 레지스터에 저장된다.
- Push, Pop 연산자가 없다.
- 명령어가 피연산자의 위치인 레지스터의 주소를 기억해야 한다.
- 장점

  1. Pop, Push 과정이 없기 때문에 같은 덧셈이라도 하나의 명령으로 충분하다.
  2. 스택기반에서는 할 수 없는 명령어 최적화를 적용할 수 있다. 예) 어떤 연산이 나중에 또 필요할 때, 레지스터에 저장하여 다시 계산하지 않고도 결과를 활용할 수 있다.

- 단점
  1. 스택기반보다 명령어의 길이가 길다. 피연산자의 주소를 명시해줘야 하기 때문에.
